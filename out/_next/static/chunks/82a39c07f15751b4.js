(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64659,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return o},searchParamsToUrlQuery:function(){return l},urlQueryToSearchParams:function(){return n}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});function l(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function n(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,i(e));else t.set(r,i(s));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return n},formatWithValidation:function(){return d},urlObjectKeys:function(){return o}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(90809)._(e.r(98183)),i=/https?|ftp|gopher|file/;function n(e){let{auth:t,hostname:r}=e,s=e.protocol||"",a=e.pathname||"",n=e.hash||"",o=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),o&&"object"==typeof o&&(o=String(l.urlQueryToSearchParams(o)));let c=e.search||o&&`?${o}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||i.test(s))&&!1!==d?(d="//"+(d||""),a&&"/"!==a[0]&&(a="/"+a)):d||(d=""),n&&"#"!==n[0]&&(n="#"+n),c&&"?"!==c[0]&&(c="?"+c),a=a.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${s}${d}${a}${c}${n}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return n(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=e.r(71645);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=l(e,s)),t&&(a.current=l(t,s))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return w},MissingStaticPage:function(){return y},NormalizeError:function(){return v},PageNotFoundError:function(){return b},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return l},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return o},isResSent:function(){return x},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return j}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let n=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>n.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function x(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&x(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class v extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class w extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return l}});let s=e.r(18967),a=e.r(52817);function l(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return g},useLinkStatus:function(){return b}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(90809),i=e.r(43476),n=l._(e.r(71645)),o=e.r(95057),d=e.r(8372),c=e.r(18581),u=e.r(18967),x=e.r(5550);e.r(33525);let m=e.r(91949),p=e.r(73668),h=e.r(9396);function f(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var r;let s,a,l,[o,g]=(0,n.useOptimistic)(m.IDLE_LINK_STATUS),b=(0,n.useRef)(null),{href:y,as:w,children:j,prefetch:N=null,passHref:k,replace:S,shallow:C,scroll:E,onClick:_,onMouseEnter:M,onTouchStart:$,legacyBehavior:A=!1,onNavigate:L,ref:P,unstable_dynamicOnHover:T,...R}=t;s=j,A&&("string"==typeof s||"number"==typeof s)&&(s=(0,i.jsx)("a",{children:s}));let O=n.default.useContext(d.AppRouterContext),U=!1!==N,D=!1!==N?null===(r=N)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:F,as:I}=n.default.useMemo(()=>{let e=f(y);return{href:e,as:w?f(w):e}},[y,w]);if(A){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=n.default.Children.only(s)}let z=A?a&&"object"==typeof a&&a.ref:P,B=n.default.useCallback(e=>(null!==O&&(b.current=(0,m.mountLinkInstance)(e,F,O,D,U,g)),()=>{b.current&&((0,m.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,m.unmountPrefetchableInstance)(e)}),[U,F,O,D,g]),H={ref:(0,c.useMergedRef)(B,z),onClick(t){A||"function"!=typeof _||_(t),A&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!O||t.defaultPrevented||function(t,r,s,a,l,i,o){if("undefined"!=typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(r)){l&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);n.default.startTransition(()=>{u(s||r,l?"replace":"push",i??!0,a.current)})}}(t,F,I,b,S,E,L)},onMouseEnter(e){A||"function"!=typeof M||M(e),A&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),O&&U&&(0,m.onNavigationIntent)(e.currentTarget,!0===T)},onTouchStart:function(e){A||"function"!=typeof $||$(e),A&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),O&&U&&(0,m.onNavigationIntent)(e.currentTarget,!0===T)}};return(0,u.isAbsoluteUrl)(I)?H.href=I:A&&!k&&("a"!==a.type||"href"in a.props)||(H.href=(0,x.addBasePath)(I)),l=A?n.default.cloneElement(a,H):(0,i.jsx)("a",{...R,...H,children:s}),(0,i.jsx)(v.Provider,{value:o,children:l})}e.r(84508);let v=(0,n.createContext)(m.IDLE_LINK_STATUS),b=()=>(0,n.useContext)(v);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18566,(e,t,r)=>{t.exports=e.r(76562)},31809,75254,89853,78583,98919,69074,63059,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(18566),l=e.i(32071);let i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:n,iconNode:d,...c},u)=>(0,r.createElement)("svg",{ref:u,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:i("lucide",l),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),c=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...a},l)=>(0,r.createElement)(d,{ref:l,iconNode:t,className:i(`lucide-${n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...a}));return s.displayName=n(e),s};e.s(["default",()=>c],75254);let u=c("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["CalendarDays",()=>u],89853);let x=c("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=c("file-check-corner",[["path",{d:"M10.5 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v6",key:"g5mvt7"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14 20 2 2 4-4",key:"15kota"}]]),p=c("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>p],78583);let h=c("files",[["path",{d:"M15 2h-4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"14sh0y"}],["path",{d:"M16.706 2.706A2.4 2.4 0 0 0 15 2v5a1 1 0 0 0 1 1h5a2.4 2.4 0 0 0-.706-1.706z",key:"1970lx"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]]),f=c("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),g=c("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),v=c("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>v],98919);let b=c("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>b],69074);let y=c("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>y],63059);let w=({mobileOpen:e=!1,onMobileOpenChange:i})=>{let[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),w=(0,a.usePathname)(),j=(0,a.useRouter)(),{logout:N,user:k}=(0,l.useAuth)(),S=d?e:n;(0,r.useEffect)(()=>{let e=()=>{c(window.innerWidth<768),window.innerWidth<768&&o(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let C=[{name:"Overview",href:"/dashboard",icon:(0,t.jsx)(f,{className:"w-5 h-5"}),activePaths:["/dashboard"]},{name:"Drafting",href:"/create-contract",icon:(0,t.jsx)(p,{className:"w-5 h-5"}),activePaths:["/create-contract"]},{name:"Templates",href:"/templates",icon:(0,t.jsx)(h,{className:"w-5 h-5"}),activePaths:["/templates"]},{name:"Contracts",href:"/contracts",icon:(0,t.jsx)(p,{className:"w-5 h-5"}),activePaths:["/contracts","/contracts/"]},{name:"Signing Requests",href:"/signing-requests",icon:(0,t.jsx)(x,{className:"w-5 h-5"}),activePaths:["/signing-requests","/signing-requests/"]},{name:"Uploads",href:"/uploads",icon:(0,t.jsx)(b,{className:"w-5 h-5"}),activePaths:["/uploads"]},{name:"Review",href:"/review",icon:(0,t.jsx)(m,{className:"w-5 h-5"}),activePaths:["/review","/review/"]},{name:"Calendar",href:"/calendar",icon:(0,t.jsx)(u,{className:"w-5 h-5"}),activePaths:["/calendar"]}];k?.is_admin&&C.push({name:"Admin",href:"/admin",icon:(0,t.jsx)(v,{className:"w-5 h-5"}),activePaths:["/admin","/admin/"]});let E=async()=>{window.confirm("Are you sure you want to logout?")&&(await N(),j.push("/"))};return(0,t.jsxs)(t.Fragment,{children:[d&&S&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>i?.(!1)}),(0,t.jsxs)("aside",{className:`fixed left-0 top-0 h-screen bg-[#0F141F] z-50 transition-all duration-300 flex flex-col ${S?"w-64":"w-[88px]"} ${d&&!S?"-translate-x-full":"translate-x-0"}`,onMouseEnter:()=>!d&&o(!0),onMouseLeave:()=>!d&&o(!1),children:[(0,t.jsxs)("div",{className:"flex items-center h-20 px-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-[#FF5C7A] rounded-xl flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:"C"})}),S&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-white font-bold text-base whitespace-nowrap",children:"ContractFlow"}),(0,t.jsx)("span",{className:"text-white/50 text-xs whitespace-nowrap",children:"Workspace"})]})]}),d&&(0,t.jsx)("button",{onClick:()=>i?.(!1),className:"ml-auto p-2 rounded-lg hover:bg-white/10 text-white/70","aria-label":"Close sidebar",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("nav",{className:"flex-1 overflow-y-auto py-2 px-4 space-y-2",children:C.map(e=>{let r=(e=>{for(let t of e.activePaths||[])if(t&&(t===w||t.endsWith("/")&&w.startsWith(t)))return!0;return!1})(e);return(0,t.jsx)(s.default,{href:e.href,children:(0,t.jsxs)("div",{className:`relative flex items-center gap-3 rounded-2xl transition-all duration-200 cursor-pointer ${S?"px-4 py-3":"px-0 py-3 justify-center"} ${r?"text-white bg-white/10":"text-white/55 hover:text-white/90 hover:bg-white/5"}`,children:[r&&(0,t.jsx)("div",{className:"absolute -left-4 top-1/2 -translate-y-1/2 w-1 h-8 bg-[#FF5C7A] rounded-r-full"}),(0,t.jsx)("div",{className:"flex-shrink-0",children:e.icon}),S&&(0,t.jsx)("span",{className:"font-medium text-sm whitespace-nowrap",children:e.name})]})},e.href)})}),(0,t.jsx)("div",{className:"mt-auto px-4 pb-6",children:(0,t.jsxs)("div",{className:`${S?"flex items-center gap-3 px-2 py-3 rounded-2xl hover:bg-white/5":"flex justify-center py-3"} transition`,children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{d&&i?.(!1),j.push("/settings")},className:`${S?"flex items-center gap-3 flex-1 min-w-0":"flex items-center"} rounded-2xl hover:bg-white/5 transition px-2 py-1.5`,"aria-label":"Open profile",title:"Profile",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#FF5C7A] to-[#8B5CF6] flex items-center justify-center text-white font-semibold flex-shrink-0 ring-1 ring-white/10",children:(k?.email?.[0]||"U").toUpperCase()}),S&&(0,t.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,t.jsx)("p",{className:"text-white text-sm font-medium truncate",children:k?.email||"User"}),(0,t.jsx)("p",{className:"text-white/45 text-xs truncate",children:k?.is_admin?"Admin":"User"})]}),S&&(0,t.jsx)(y,{className:"w-4 h-4 text-white/40 flex-shrink-0"})]}),S&&(0,t.jsx)("button",{onClick:E,className:"p-2 rounded-lg hover:bg-white/10 text-white/60 hover:text-white","aria-label":"Logout",title:"Logout",children:(0,t.jsx)(g,{className:"w-5 h-5"})}),!S&&(0,t.jsx)("button",{onClick:E,className:"p-2 rounded-2xl hover:bg-white/10 text-white/60 hover:text-white","aria-label":"Logout",title:"Logout",children:(0,t.jsx)(g,{className:"w-5 h-5"})})]})})]}),(0,t.jsx)("div",{className:`hidden md:block transition-all duration-300 ${n?"w-64":"w-[88px]"}`})]})},j=c("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);e.s(["default",0,({children:e})=>{let[s,a]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"flex h-screen bg-[#F2F0EB]",children:[(0,t.jsx)(w,{mobileOpen:s,onMobileOpenChange:a}),(0,t.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a(!0),className:"md:hidden fixed top-4 left-4 z-[60] inline-flex items-center justify-center w-10 h-10 rounded-xl bg-[#0F141F] text-white shadow-lg","aria-label":"Open navigation",children:(0,t.jsx)(j,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"px-6 md:px-10 py-8",children:e})]})]})}],31809)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},99023,e=>{"use strict";let t=(0,e.i(75254).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],99023)},87853,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(31809),l=e.i(59752),i=e.i(75254);let n=(0,i.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=e.i(64659),d=e.i(40160),c=e.i(86536),u=e.i(78583),x=e.i(99023),m=e.i(7233),p=e.i(55436);let h=(0,i.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),f=e=>Array.isArray(e)?e:[],g=e=>{if(!e||"object"!=typeof e)return{label:"Date",value:String(e||"")};let t=String(e.label||e.name||"Date"),r=String(e.value||e.date||e.text||""),s=String(e.type||e.kind||"").toLowerCase();return{label:t,value:r,color:s.includes("expire")?"rose":s.includes("effective")?"amber":"slate"}},v=({children:e,tone:r="slate"})=>{let s={slate:"bg-slate-50 text-slate-700 border-slate-200",amber:"bg-amber-50 text-amber-700 border-amber-200",rose:"bg-rose-50 text-rose-700 border-rose-200",emerald:"bg-emerald-50 text-emerald-700 border-emerald-200",violet:"bg-violet-50 text-violet-700 border-violet-200"};return(0,t.jsx)("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold border ${s[r]||s.slate}`,children:e})};function b(){let e=(0,s.useRouter)(),i=(0,s.useSearchParams)(),b=i?.get("id")||"",y=(0,r.useRef)(null),[w,j]=(0,r.useState)(!0),[N,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[E,_]=(0,r.useState)(null),[M,$]=(0,r.useState)(null),[A,L]=(0,r.useState)(null),[P,T]=(0,r.useState)(""),[R,O]=(0,r.useState)(!0),[U,D]=(0,r.useState)(!1),[F,I]=(0,r.useState)(100),[z,B]=(0,r.useState)({}),[H,V]=(0,r.useState)(!1),W=E?.analysis||{},q=W?.analysis_summary||{},K=async()=>{if(b){C(null),j(!0);try{let e=new l.ApiClient,t=await e.getReviewContractById(b);if(!t.success)throw Error(t.error||"Failed to load");_(t.data);let r=await e.getReviewContractUrl(b);if(r.success){let e=r.data?.url;$(e||null),L(null);let s=(t.data?.file_type||"").toLowerCase();if(e&&"txt"===s){let t=await fetch(e).then(e=>e.text());L(t)}}}catch(e){C(e instanceof Error?e.message:"Failed to load")}finally{j(!1)}}};(0,r.useEffect)(()=>{if(!b){j(!1),C("Missing review id");return}K()},[b]),(0,r.useEffect)(()=>{let e=e=>{if(!U)return;let t=y.current;t&&e.target instanceof Node&&!t.contains(e.target)&&D(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[U]);let X=async e=>{if(E){C(null),k(!0);try{let t=new l.ApiClient,r="txt"===e?await t.downloadReviewReportTxt(E.id):await t.downloadReviewReportPdf(E.id);if(!r.success||!r.data)throw Error(r.error||"Download failed");let s=r.data,a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a;let n=(E.title||E.original_filename||"lawflow_report").trim().replace(/\s+/g,"_");i.download="txt"===e?`${n}_review.txt`:`${n}_review.pdf`,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(a)}catch(e){C(e instanceof Error?e.message:"Download failed")}finally{k(!1)}}},G=()=>{M&&window.open(M,"_blank","noopener,noreferrer")},Z=String(W?.summary||"").trim(),J=f(W?.parties),Q=f(W?.dates),Y=f(W?.values),ee=f(W?.obligations),et=f(W?.constraints),er=f(W?.clauses),es=f(W?.insights),ea=f(W?.suggestions),el=String(W?.jurisdiction||"").trim(),ei=P.trim().toLowerCase(),en=(e,s)=>{let a=String(e||""),l=String(s||"").trim();if(!a||!l)return a;try{let e=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=RegExp(e,"ig"),i=a.split(s),n=a.match(s)||[];if(i.length<=1)return a;let o=[];for(let e=0;e<i.length;e++){i[e]&&o.push((0,t.jsx)(r.default.Fragment,{children:i[e]},`p-${e}`));let s=n[e];s&&o.push((0,t.jsx)("span",{className:"rounded bg-yellow-100 px-1 text-slate-900",children:s},`m-${e}`))}return o}catch{return a}},eo=(0,r.useMemo)(()=>ei?er.filter(e=>{let t=String(e?.category||"").toLowerCase(),r=String(e?.snippet||"").toLowerCase(),s=String(e?.risk||"").toLowerCase();return String(e?.title||e?.matched_library?.title||"").toLowerCase(),String(e?.recommendation||e?.recommended_text||e?.suggested_text||e?.ai_suggestion||e?.suggestion||"").toLowerCase(),t.includes(ei)||r.includes(ei)||s.includes(ei)}):er,[er,ei]),ed=(0,r.useMemo)(()=>ei?ea.filter(e=>`${e?.title||""} ${e?.text||""}`.toLowerCase().includes(ei)):ea,[ea,ei]),ec=e=>{if(!e)return"";let t=e?.amount??e?.value??"",r=e?.currency??"",s=String(t).trim();return s?r?`${s} ${String(r).toUpperCase()}`:s:""},eu=(0,r.useMemo)(()=>J.map(e=>String(e?.name||"").trim()).filter(Boolean).slice(0,3).join(", "),[J]),ex=(0,r.useMemo)(()=>{let e=Q.find(e=>String(e?.type||"").toLowerCase().includes("effective"));return e?.value||""},[Q]),em=(0,r.useMemo)(()=>{let e=Q.find(e=>String(e?.type||"").toLowerCase().includes("end"));return e?.value||""},[Q]),ep=(0,r.useMemo)(()=>ec(Y[0]),[Y]);(0,r.useMemo)(()=>ei?J.filter(e=>String(e?.name||"").toLowerCase().includes(ei)):J,[J,ei]),(0,r.useMemo)(()=>ei?Q.filter(e=>{let t=g(e);return`${t.label} ${t.value}`.toLowerCase().includes(ei)}):Q,[Q,ei]),(0,r.useMemo)(()=>ei?Y.filter(e=>JSON.stringify(e||"").toLowerCase().includes(ei)):Y,[Y,ei]);let eh=(e,t)=>{let r=String(e||"").trim();return r?r.length<=t?r:`${r.slice(0,t).trim()}…`:""},ef=()=>{if(!E)return"";let e=(E.original_filename||E.title||"Contract Review").trim(),t=new Date,r=String(q?.risk_level||"MEDIUM").toUpperCase(),s=Number(q?.risk_score||0),a=J.map(e=>String(e?.name||"").trim()).filter(Boolean),l=Q.map(e=>{let t=g(e);return t.value?`${t.label}: ${t.value}`:""}).filter(Boolean),i=Y.map(e=>{let t=ec(e),r=String(e?.label||e?.name||"Value").trim();return t?`${r}: ${t}`:""}).filter(Boolean),n=er.map((e,t)=>{let r=String(e?.category||"Clause"),s=String(e?.title||e?.matched_library?.title||r),a="number"==typeof e?.match_percent?e.match_percent:null,l=ew(e?.match_percent),i=String(e?.snippet||e?.extracted_text||e?.text||"").trim(),n=String(ey(e)||"").trim(),o="emerald"===l.tone?"#16a34a":"amber"===l.tone?"#f59e0b":"rose"===l.tone?"#e11d48":"#64748b";return`
        <div class="card" style="margin-top:12px">
          <div class="row" style="justify-content:space-between; align-items:flex-start; gap:12px">
            <div>
              <div class="h3">${eg(s)}</div>
              <div class="muted" style="font-weight:700; font-size:11px; margin-top:4px">${eg(r)}</div>
            </div>
            <div class="row" style="gap:8px; flex-wrap:wrap; justify-content:flex-end">
              <span class="badge" style="border-color:${o}; color:${o}">${eg(l.label)}</span>
              <span class="badge" style="border-color:#cbd5e1; color:#0f172a">${null!=a?`${a}%`:"—"}</span>
            </div>
          </div>
          <div class="grid2" style="margin-top:10px">
            <div class="mini">
              <div class="k">EXTRACTED TEXT</div>
              <div class="v">${eg(i||"—")}</div>
            </div>
            <div class="mini" style="border-color:#fecdd3; background:#fff1f2">
              <div class="k" style="color:#e11d48">RECOMMENDATION</div>
              <div class="v">${eg(n||"—")}</div>
            </div>
          </div>
        </div>
      `}),o=ea.slice(0,12).map(e=>{let t=String(e?.title||"Suggestion"),r=String(e?.text||"").trim();return`
        <div class="card" style="margin-top:12px; border-color:#ffe4e6; background:#fff1f2">
          <div class="h3">${eg(t)}</div>
          <div class="v" style="margin-top:8px">${eg(r||"—")}</div>
        </div>
      `});return`
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${eg(e)} - Review Report</title>
    <style>
      :root { --ink:#0f172a; --muted:#64748b; --line:#e2e8f0; --bg:#ffffff; --soft:#f8fafc; --brand:#ff5aa0; }
      @page { margin: 18mm; }
      * { box-sizing: border-box; }
      body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color:var(--ink); background: var(--soft); }
      .wrap { max-width: 980px; margin: 0 auto; padding: 28px 18px; }
      .top { background: var(--bg); border:1px solid var(--line); border-radius: 18px; padding: 18px; }
      .row { display:flex; }
      .col { display:flex; flex-direction:column; }
      .muted { color: var(--muted); }
      .h1 { font-size: 22px; font-weight: 900; letter-spacing: -0.02em; }
      .h2 { font-size: 14px; font-weight: 900; margin:0; }
      .h3 { font-size: 13px; font-weight: 800; }
      .badge { display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px; border:1px solid var(--line); font-size:12px; font-weight:800; background:#fff; }
      .grid4 { display:grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap:10px; margin-top: 14px; }
      .tile { border:1px solid var(--line); border-radius: 16px; padding: 12px; background: #fff; }
      .k { font-size: 10px; font-weight: 800; letter-spacing: 0.08em; color: var(--muted); }
      .v { font-size: 12px; line-height: 1.5; white-space: pre-wrap; }
      .tile .vBig { font-size: 16px; font-weight: 900; margin-top: 6px; }
      .section { margin-top: 14px; }
      .card { border:1px solid var(--line); border-radius: 18px; padding: 14px; background: #fff; }
      .grid2 { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
      .mini { border:1px solid var(--line); border-radius: 14px; padding: 10px; background:#fff; }
      .hr { height:1px; background: var(--line); margin: 14px 0; }
      @media print { body { background: #fff; } .wrap { padding:0; } }
      @media (max-width: 820px) { .grid4 { grid-template-columns: repeat(2, minmax(0,1fr)); } .grid2 { grid-template-columns: 1fr; } }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="top">
        <div class="row" style="justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap">
          <div class="col" style="min-width:260px">
            <div class="h1">${eg(e)}</div>
            <div class="muted" style="margin-top:6px; font-size:12px">Generated ${t.toLocaleString()}</div>
          </div>
          <div class="row" style="gap:10px; flex-wrap:wrap; justify-content:flex-end">
            <span class="badge" style="border-color:#fda4af; color:#e11d48">${eg(String(E.status||"").toUpperCase())}</span>
            <span class="badge" style="border-color:#fecdd3; color:#e11d48">${eg(r)} RISK (${s}/100)</span>
          </div>
        </div>

        <div class="grid4">
          <div class="tile"><div class="k">TOTAL CLAUSES</div><div class="vBig">${eg(String(Number(q?.clauses_count||er.length||0)))}</div></div>
          <div class="tile"><div class="k">AMOUNT</div><div class="vBig">${eg(ep||"—")}</div></div>
          <div class="tile"><div class="k">PARTIES</div><div class="vBig">${eg(eu||(a.length?`${a.length} parties`:"—"))}</div></div>
          <div class="tile"><div class="k">DATE</div><div class="vBig">${eg(String(ex||(Q[0]?.value?String(Q[0].value):"—")))}</div></div>
        </div>

        <div class="section">
          <div class="hr"></div>
          <div class="row" style="gap:10px; flex-wrap:wrap">
            ${el?`<span class="badge">Jurisdiction: ${eg(el)}</span>`:""}
            ${em?`<span class="badge">Expiry: ${eg(String(em))}</span>`:""}
          </div>
        </div>
      </div>

      <div class="section">
        <div class="card">
          <div class="h2">Summary</div>
          <div class="v" style="margin-top:10px">${eg(Z||"—")}</div>
        </div>
      </div>

      ${a.length||l.length||i.length?`
      <div class="section">
        <div class="card">
          <div class="h2">Extracted Data</div>
          <div class="grid2" style="margin-top:12px">
            <div class="mini"><div class="k">PARTIES</div><div class="v" style="margin-top:8px">${eg(a.join("\n")||"—")}</div></div>
            <div class="mini"><div class="k">DATES & VALUES</div><div class="v" style="margin-top:8px">${eg([...l,...i].join("\n")||"—")}</div></div>
          </div>
        </div>
      </div>
      `:""}

      <div class="section">
        <div class="card">
          <div class="h2">Detected Clauses</div>
          ${n.join("")}
        </div>
      </div>

      <div class="section">
        <div class="card">
          <div class="h2">Suggestions</div>
          ${o.join("")||'<div class="v" style="margin-top:10px">—</div>'}
        </div>
      </div>

      <div class="section">
        <div class="card">
          <div class="h2">Review Notes</div>
          <div class="v" style="margin-top:10px">${eg(String(E.review_text||"—"))}</div>
        </div>
      </div>
    </div>
  </body>
</html>`},eg=e=>String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ev=()=>{if(!E)return;let e=ef(),t=window.open("","_blank","noopener,noreferrer");t?(t.document.open(),t.document.write(e),t.document.close(),t.focus(),setTimeout(()=>{try{t.print()}catch{}},300)):C("Popup blocked. Allow popups to print the report.")},eb=async e=>{let t=String(e||"").trim();if(t)try{await navigator.clipboard.writeText(t)}catch{let e=document.createElement("textarea");e.value=t,e.setAttribute("readonly","true"),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}},ey=e=>{let t=e?.recommendation||e?.recommended_text||e?.suggested_text||e?.ai_suggestion||e?.suggestion;if(t)return String(t);let r=String(e?.category||"").toLowerCase(),s=String(e?.title||e?.matched_library?.title||"").toLowerCase(),a=ea.find(e=>{let t=`${e?.title||""} ${e?.text||""}`.toLowerCase();return r&&t.includes(r)||s&&t.includes(s)}),l=String(a?.text||a?.recommendation||"").trim();if(l)return l;let i=e?.matched_library;return String(i?.suggested_text||i?.recommended_text||i?.text||"").trim()},ew=e=>{let t="number"==typeof e?e:Number(e);return Number.isFinite(t)?t>=85?{label:"MATCH",tone:"emerald"}:t>=60?{label:"PARTIAL MATCH",tone:"amber"}:{label:"LOW MATCH",tone:"rose"}:{label:"MATCH",tone:"slate"}},ej=E?.status==="ready",eN=(0,r.useMemo)(()=>Z||J.length||Q.length||Y.length||ee.length||er.length||es.length||ea.length,[Z,J.length,Q.length,Y.length,ee.length,er.length,es.length,ea.length]);return(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"space-y-6 anim-fade-in",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>e.push("/review"),className:"inline-flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-slate-900",children:[(0,t.jsx)(n,{className:"w-4 h-4"}),"Back"]}),(0,t.jsxs)("h1",{className:"mt-3 text-2xl md:text-3xl font-extrabold text-slate-900 truncate",children:["Contract",(0,t.jsx)("br",{className:"md:hidden"})," Validation"]})]})}),S&&(0,t.jsx)("div",{className:"bg-rose-50 border border-rose-200 text-rose-700 rounded-2xl p-4 text-sm",children:S}),w?(0,t.jsx)("div",{className:"bg-white rounded-3xl border border-slate-200 p-10 text-slate-500",children:"Loading…"}):E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-white rounded-[28px] border border-slate-200 px-4 py-3 md:px-6 md:py-4 flex items-center gap-3 flex-wrap anim-fade-up",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-2xl bg-slate-50 border border-slate-200 min-w-0",children:[(0,t.jsx)(u.FileText,{className:"w-4 h-4 text-rose-500"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-slate-900 truncate",children:E.original_filename||E.title}),E.file_type?(0,t.jsxs)("span",{className:"text-[11px] font-bold text-slate-500",children:[".",String(E.file_type).toLowerCase()]}):null]}),(0,t.jsxs)("div",{className:"relative flex-1 min-w-[180px]",children:[(0,t.jsx)(p.Search,{className:"w-4 h-4 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2"}),(0,t.jsx)("input",{value:P,onChange:e=>T(e.target.value),placeholder:"Search extraction…",className:"w-full bg-white border border-slate-200 rounded-full pl-10 pr-4 py-3 text-sm text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-rose-200"}),P.trim()?(0,t.jsx)("button",{type:"button",onClick:()=>T(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs font-extrabold text-slate-500 hover:text-slate-800","aria-label":"Clear search",title:"Clear",children:"Clear"}):null]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[E.status&&(0,t.jsx)("span",{className:`hidden md:inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${{uploaded:"bg-slate-50 text-slate-700 border-slate-200",processing:"bg-amber-50 text-amber-700 border-amber-200",ready:"bg-emerald-50 text-emerald-700 border-emerald-200",failed:"bg-rose-50 text-rose-700 border-rose-200"}[E.status]||"bg-slate-50 text-slate-700 border-slate-200"}`,children:String(E.status).toUpperCase()}),(0,t.jsxs)("div",{className:"relative",ref:y,children:[(0,t.jsxs)("button",{type:"button",onClick:()=>D(e=>!e),className:"inline-flex items-center gap-2 rounded-full bg-[#0F141F] text-white px-4 py-2 text-sm font-semibold hover:bg-[#0F141F]/90",disabled:N||w,children:[(0,t.jsx)(d.Download,{className:"w-4 h-4"}),"Download",(0,t.jsx)(o.ChevronDown,{className:"w-4 h-4"})]}),U&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-52 rounded-2xl border border-slate-200 bg-white shadow-lg overflow-hidden z-20 anim-slide-down",children:[(0,t.jsx)("button",{type:"button",className:"w-full text-left px-4 py-3 text-sm hover:bg-slate-50",onClick:()=>{D(!1),(()=>{if(!E)return;let e=new Blob([ef()],{type:"text/html;charset=utf-8"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t;let s=(E.title||E.original_filename||"lawflow_report").trim().replace(/\s+/g,"_");r.download=`${s}_styled_report.html`,document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(t)})()},children:"Styled report (HTML)"}),(0,t.jsx)("button",{type:"button",className:"w-full text-left px-4 py-3 text-sm hover:bg-slate-50",onClick:()=>{D(!1),ev()},children:"Styled report (Print/PDF)"}),(0,t.jsx)("div",{className:"h-px bg-slate-100"}),(0,t.jsx)("button",{type:"button",className:"w-full text-left px-4 py-3 text-sm hover:bg-slate-50",onClick:()=>{D(!1),X("pdf")},children:"Report (PDF) – basic"}),(0,t.jsx)("button",{type:"button",className:"w-full text-left px-4 py-3 text-sm hover:bg-slate-50",onClick:()=>{D(!1),X("txt")},children:"Report (TXT) – basic"}),(0,t.jsx)("button",{type:"button",className:"w-full text-left px-4 py-3 text-sm hover:bg-slate-50",onClick:()=>{D(!1),G()},disabled:!M,children:"Original file"})]})]}),(0,t.jsx)("button",{type:"button",onClick:G,className:"hidden md:inline-flex items-center justify-center w-11 h-11 rounded-full bg-white border border-slate-200","aria-label":"Open original",disabled:!M,title:"Open original",children:(0,t.jsx)(c.Eye,{className:"w-5 h-5 text-slate-700"})})]})]}),(0,t.jsxs)("div",{className:"lg:hidden flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>O(e=>!e),className:"inline-flex items-center gap-2 rounded-full bg-white border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",children:["Extracted Data",(0,t.jsx)(o.ChevronDown,{className:`w-4 h-4 transition ${R?"rotate-180":"rotate-0"}`})]}),ej&&(0,t.jsx)(v,{tone:"emerald",children:"Analyzed"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(480px,45%),1fr] xl:grid-cols-[minmax(540px,46%),1fr] gap-6",children:[(0,t.jsx)("div",{className:`${R?"block":"hidden"} lg:block lg:sticky lg:top-6 lg:self-start anim-fade-up`,children:(0,t.jsxs)("div",{className:"bg-white rounded-[28px] border border-slate-200 p-6 shadow-sm max-h-[calc(100vh-140px)] overflow-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-extrabold text-slate-900",children:"Analysis & Clauses"}),(0,t.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"AI review + clause matching"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>ev(),className:"text-xs font-bold text-rose-600 hover:text-rose-700",disabled:N||w,title:"Export styled report",children:"Export Report"})]}),ei?(0,t.jsxs)("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-700",children:["Showing ",(0,t.jsx)("span",{className:"font-extrabold",children:eo.length})," clauses and"," ",(0,t.jsx)("span",{className:"font-extrabold",children:ed.length})," suggestions for “",P.trim(),"”."]}):null,(0,t.jsxs)("div",{className:"mt-4 rounded-3xl bg-slate-50 border border-slate-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-sm font-extrabold text-slate-900",children:"Analysis Summary"}),(0,t.jsxs)(v,{tone:"HIGH"===String(q?.risk_level||"").toUpperCase()?"rose":"MEDIUM"===String(q?.risk_level||"").toUpperCase()?"amber":"emerald",children:[String(q?.risk_level||"MEDIUM").toUpperCase()," RISK"]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[{label:"CLAUSES",value:Number(q?.clauses_count||er.length||0)},{label:"OBLIGATIONS",value:Number(q?.obligations_count||ee.length||0)},{label:"CONSTRAINTS",value:Number(q?.constraints_count||et.length||0)}].map(e=>(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-slate-200 p-3 text-center",children:[(0,t.jsx)("div",{className:"text-lg font-extrabold text-slate-900",children:e.value}),(0,t.jsx)("div",{className:"text-[10px] font-bold text-slate-500 mt-1",children:e.label})]},e.label))})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[{label:"TOTAL CLAUSES",value:String(Number(q?.clauses_count||er.length||0))},{label:"AMOUNT",value:ep||"—"},{label:"PARTIES",value:eu||(J.length?`${String(J.length)} parties`:"—")},{label:"DATE",value:ex||(Q[0]?.value?String(Q[0].value):"—")}].map(e=>(0,t.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",title:e.value,children:[(0,t.jsx)("div",{className:"text-[10px] font-bold text-slate-500 tracking-wide",children:e.label}),(0,t.jsx)("div",{className:"mt-2 text-lg font-extrabold text-slate-900 truncate",children:e.value})]},e.label))}),!ej&&(0,t.jsxs)("div",{className:"mt-4 rounded-2xl bg-amber-50 border border-amber-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-amber-900",children:"Analysis pending"}),(0,t.jsx)("div",{className:"text-xs text-amber-800 mt-1",children:"Processing may take a moment."})]}),"failed"===E.status&&(0,t.jsxs)("div",{className:"mt-4 rounded-2xl bg-rose-50 border border-rose-200 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-rose-800",children:[(0,t.jsx)(h,{className:"w-4 h-4"}),"Review failed"]}),(0,t.jsx)("div",{className:"text-xs text-rose-700 mt-2 whitespace-pre-wrap",children:E.error_message||"Unknown error"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold text-slate-500",children:"EXTRACTED DATA"}),(0,t.jsxs)("div",{className:"mt-3 flex flex-col gap-2",children:[eu?(0,t.jsxs)(v,{tone:"violet",children:["Parties: ",eu]}):null,ex?(0,t.jsxs)(v,{tone:"amber",children:["Eff: ",String(ex)]}):null,em?(0,t.jsxs)(v,{tone:"rose",children:["Exp: ",String(em)]}):null,ep?(0,t.jsxs)(v,{tone:"emerald",children:["Value: ",ep]}):null,el?(0,t.jsxs)(v,{tone:"violet",children:["Jurisdiction: ",el]}):null,eu||ex||em||ep||el?null:(0,t.jsx)("span",{className:"text-sm text-slate-500",children:"—"})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold text-slate-500",children:"DETECTED CLAUSES"}),(0,t.jsxs)(v,{tone:"slate",children:[eo.length," found"]})]}),(0,t.jsx)("div",{className:"mt-2 text-[11px] text-slate-500",children:"Match indicates similarity vs your clause library."}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:0===eo.length?(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"—"}):(H?eo:eo.slice(0,12)).map((e,r)=>{let s=String(e?.category||"Clause"),a=String(e?.title||e?.matched_library?.title||s),l=String(e?.snippet||"").trim(),i="number"==typeof e?.match_percent?e.match_percent:null,n=ew(e?.match_percent),o=ey(e),d=String(e?.id||`${s}:${a}:${r}`),c=!!z[d],u=l||String(e?.extracted_text||e?.text||"").trim(),x=eh(u,260),m=eh(o||"",260),p=!!ei&&(u.toLowerCase().includes(ei)||String(o||"").toLowerCase().includes(ei)),h=c||p,f=u&&x&&u!==x||o&&m&&String(o).trim()!==m;return(0,t.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 transition hover:bg-slate-50",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-semibold text-slate-900 truncate",children:a}),(0,t.jsx)("div",{className:"text-[11px] font-bold text-slate-500 truncate",children:s})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{tone:n.tone,children:n.label}),(0,t.jsx)(v,{tone:"slate",children:null!=i?`${i}%`:"—"})]})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 xl:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[(0,t.jsx)("div",{className:"text-[10px] font-bold tracking-wide text-slate-500",children:"EXTRACTED TEXT"}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-700 whitespace-pre-wrap",children:h?en(u||"—",P):en(x||"—",P)})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50/30 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"text-[10px] font-bold tracking-wide text-rose-600",children:"RECOMMENDATION"}),o?(0,t.jsx)("button",{type:"button",className:"text-[10px] font-extrabold text-slate-600 hover:text-slate-900",onClick:async()=>{await eb(String(o))},title:"Copy recommendation",children:"Copy"}):null]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-800 whitespace-pre-wrap",children:h?en(o||"—",P):en(m||"—",P)})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between gap-3 flex-wrap",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold text-slate-400",children:" "}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:f?(0,t.jsx)("button",{type:"button",className:"rounded-full bg-white border border-slate-200 text-slate-700 px-4 py-2 text-xs font-extrabold hover:bg-slate-50",onClick:()=>B(e=>({...e,[d]:!e[d]})),children:c?"Show less":"Show more"}):null})]})]},d)})}),eo.length>12&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)("button",{type:"button",className:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:()=>V(e=>!e),children:H?"Show fewer clauses":`Show all clauses (${eo.length})`})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold text-slate-500",children:"SUMMARY"}),(0,t.jsx)("div",{className:"mt-3 text-sm text-slate-700 whitespace-pre-wrap",children:Z||"—"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold text-slate-500",children:"SUGGESTIONS"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:0===ed.length?(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"—"}):ed.slice(0,8).map((e,r)=>(0,t.jsxs)("div",{className:"rounded-3xl border border-rose-100 bg-rose-50/40 p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-slate-900",children:e?.title||"Suggestion"}),(0,t.jsx)("div",{className:"text-xs text-slate-700 mt-2 whitespace-pre-wrap",children:en(String(e?.text||""),P)})]},r))})]})]})}),(0,t.jsxs)("div",{className:"space-y-6 anim-fade-up",id:"document-preview",children:[(0,t.jsxs)("div",{className:"bg-white rounded-[28px] border border-slate-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-3 md:px-6 md:py-4 border-b border-slate-200 flex items-center justify-between gap-3 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"font-extrabold text-slate-900",children:"Document Preview"}),(0,t.jsx)("div",{className:"text-xs text-slate-500",children:E.file_type?.toLowerCase()==="pdf"?"PDF":"Document"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"w-10 h-10 rounded-full bg-white border border-slate-200 inline-flex items-center justify-center",onClick:()=>I(e=>Math.max(50,e-10)),"aria-label":"Zoom out",children:(0,t.jsx)(x.Minus,{className:"w-4 h-4 text-slate-700"})}),(0,t.jsxs)("div",{className:"text-xs font-bold text-slate-600 w-14 text-center",children:[F,"%"]}),(0,t.jsx)("button",{type:"button",className:"w-10 h-10 rounded-full bg-white border border-slate-200 inline-flex items-center justify-center",onClick:()=>I(e=>Math.min(150,e+10)),"aria-label":"Zoom in",children:(0,t.jsx)(m.Plus,{className:"w-4 h-4 text-slate-700"})})]})]}),(0,t.jsxs)("div",{className:"p-4 md:p-6",children:[M?null!=A?(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-slate-800 bg-slate-50 border border-slate-200 rounded-2xl p-4 max-h-[70vh] overflow-auto",children:A}):"pdf"===(E.file_type||"").toLowerCase()?(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 overflow-hidden bg-slate-50",children:(0,t.jsx)("div",{className:"origin-top-left",style:{transform:`scale(${F/100})`,width:`${100/(F/100)}%`},children:(0,t.jsx)("iframe",{src:M,className:"w-full h-[72vh]",title:"Original Document"})})}):(0,t.jsx)("div",{className:"text-sm text-slate-700",children:"Preview isn’t available for this file type. Use “Original file” from Download."}):(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"No preview URL available."}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3 flex-wrap",children:[(0,t.jsx)("div",{className:"text-xs text-slate-500",children:Z?"Summary available":"No summary available yet"}),ej?(0,t.jsx)(v,{tone:"emerald",children:"Analyzed"}):(0,t.jsx)(v,{tone:"amber",children:"AI Analysis Pending"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-[28px] border border-slate-200 p-6",children:[(0,t.jsx)("div",{className:"font-extrabold text-slate-900",children:"Review Notes (Editor)"}),(0,t.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Read-only view of the AI reviewer output"}),(0,t.jsx)("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:(0,t.jsx)("div",{className:"text-sm text-slate-800 whitespace-pre-wrap",children:E.review_text?.trim()?E.review_text:"—"})}),!eN&&(0,t.jsx)("div",{className:"mt-4 text-sm text-slate-600",children:"No structured extraction found yet. Upload a clearer PDF/DOCX and try again."})]})]})]})]}):(0,t.jsx)("div",{className:"bg-white rounded-3xl border border-slate-200 p-10 text-slate-500",children:"Not found"})]})})}e.s(["default",()=>b],87853)}]);